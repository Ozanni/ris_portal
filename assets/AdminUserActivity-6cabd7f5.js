import{aF as U,aG as c,a as r,j as f,S as O,ao as h,bd as _,r as x,F as E}from"./vendor-1c7a9a47.js";import{cP as g,cQ as F,cR as u,cS as L,bj as b,bf as C,b9 as I,bm as D,gk as m,eT as A,f3 as M,f4 as G,f5 as V,ex as z,e5 as w,dm as Y,bv as j,ca as S,f6 as v,cw as B,cx as P,cb as N,f7 as Q,f9 as k,fa as W}from"./index-cdd5c634.js";const q=g.injectEndpoints({endpoints:e=>({getListUserActivity:e.query({query:n=>F(n,u.USER_ACTIVITY),providesTags:(n={list:[],meta:{totalRecords:0}})=>[{type:u.USER_ACTIVITY},...n.list.map(s=>({type:u.USER_ACTIVITY,id:s.id}))],transformResponse:L})})}),{useGetListUserActivityQuery:K,useLazyGetListUserActivityQuery:H}=q;var R=(e=>(e.LOGIN="LOGIN",e.LOGOUT="LOGOUT",e.OPEN_VIEWER="OPEN_VIEWER",e))(R||{});const X=g.injectEndpoints({endpoints:e=>({getListUserActivityType:e.query({query:n=>F(n,u.USER_ACTIVITY_TYPE),providesTags:(n={list:[],meta:{totalRecords:0}})=>[{type:u.USER_ACTIVITY_TYPE},...n.list.map(s=>({type:u.USER_ACTIVITY_TYPE,id:s.id}))],transformResponse:L})})}),{useLazyGetListUserActivityTypeQuery:$,useGetListUserActivityTypeQuery:re}=X,J={fullname:"",type:void 0,username:""},Z=()=>{const e=b(),n=C(),[s]=H(),[y]=$(),i=I(D(m)),p=async()=>{var t;return((t=(await y({filter:{}},!0)).data)==null?void 0:t.list)??[]},a={mode:"onChange",resolver:U(c.object({fullname:c.string().trim().optional().transform(A),username:c.string().trim().optional().transform(A),type:c.union([c.string(),c.nativeEnum(R)]).transform(A)})),defaultValues:{fullname:(i==null?void 0:i.filter.fullname)??"",username:(i==null?void 0:i.filter.username)??"",type:(i==null?void 0:i.filter.type)??void 0}};return r(M,{formOptions:a,onSubmit:t=>{n(j({tableId:m,filter:t})),s({...i,filter:t})},autoSubmit:!0,submitOnEnter:!0,renderInputs:t=>r(G,{handleSubmit:t.submit,renderPrimaryField:({open:o,isOpen:T})=>r(V,{name:"fullname",control:t.control,handleSubmit:t.submit,handleExpand:o,isExpanded:T,isFormDirty:t.formState.isDirty,handleReset:()=>t.reset(J),MyTextFieldProps:{placeholder:e.resources.userActivity.fullname(),fullWidth:!0,onKeyDown:t.onKeyDown}}),ExtraFieldsComponent:f(O,{spacing:1,children:[r(z,{name:"username",control:t.control,MyTextFieldProps:{label:e.resources.userActivity.username(),placeholder:e.resources.userActivity.username(),fullWidth:!0,onKeyDown:t.onKeyDown}}),r(w,{name:"type",control:t.control,MySelectProps:{label:e.resources.userActivity.type()},disableValue:i==null?void 0:i.filter.type,onGetListRecord:p,renderSelectField:({listData:o,formSelectFieldProps:T})=>f(Y,{...T,children:[r(h,{value:"",children:"Â "},"null"),o.map(d=>r(h,{value:(d==null?void 0:d.name)||"",children:d.name},d.id))]})})]})})})},ee=()=>{const e=b(),n=I(D(m)),{data:s,isFetching:y,refetch:i}=K(n||_.skipToken),p=x.useMemo(()=>[{type:"custom",getColumnDef:a=>a.display({id:"stt",header:e.messages.stt(),cell:l=>r(S,{children:l.row.index+1}),minSize:v,maxSize:v})},{type:"record",name:"id",headerLabel:"ID",renderCell:a=>r(S,{children:a.getValue()}),columnDefOptions:{maxSize:150},enableSort:!0},{type:"record",name:"type",headerLabel:e.resources.userActivity.type(),columnDefOptions:{size:150}},{type:"record",name:"activityTime",headerLabel:e.resources.userActivity.activityTime(),renderCell:a=>{var l;return r(E,{children:(l=B(a.getValue()))==null?void 0:l.format(P.dateTime)})},enableSort:!0,columnDefOptions:{size:200}},{type:"custom",getColumnDef:a=>a.display({id:"user",header:()=>e.resources.userActivity.fullname(),cell:l=>{var t,o;return(o=(t=l.row.original)==null?void 0:t.user)==null?void 0:o.fullname},size:250})},{type:"custom",getColumnDef:a=>a.display({id:"user",header:()=>e.resources.userActivity.username(),cell:l=>{var t,o;return(o=(t=l.row.original)==null?void 0:t.user)==null?void 0:o.username},size:150})},{type:"record",name:"remoteAddress",headerLabel:e.resources.userActivity.remoteAddress(),columnDefOptions:{size:250}},{type:"record",name:"description",headerLabel:e.resources.userActivity.description(),columnDefOptions:{size:650}}],[e.messages,e.resources.userActivity]);return r(N,{tableId:m,data:s==null?void 0:s.list,tableColumnsDescription:p,MyDataGridProps:{isLoading:y},paginationControls:{totalRecords:s==null?void 0:s.meta.totalRecords,pageSize:s==null?void 0:s.list.length},TanstackTableOptions:{enableRowSelection:!0,enableMultiRowSelection:!1},FilterComponent:r(Z,{}),renderActionButtons:()=>r(Q,{tableId:m,hideButtonAdd:!0,hideButtonDelete:!0,hideButtonEdit:!0,refetch:i})})},ie=()=>{const e=b();return r(k,{children:r(W,{title:e.resources.userActivity.title(),ActionButtons:r(E,{}),TableComponent:r(ee,{})})})};export{ie as AdminUserActivity};
