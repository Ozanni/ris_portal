import{r as b,a as r,aS as w,ai as C,j as O,F as S,bd as D,bs as L}from"./vendor-1c7a9a47.js";import{bf as R,bo as I,b9 as p,bm as T,gp as u,bp as M,bv as E,gq as B,dl as A,bj as y,ce as v,cf as x,bS as F,gr as N,bD as P,cn as k,gs as z,cr as _,cs as G,ca as q,ct as V,cu as j,cv as Q,cw as h,cx as f,cy as W,gt as U,cb as $,cB as J,gu as Y,gv as H,gw as K}from"./index-cdd5c634.js";import{g as X}from"./getFinalApprovedRequest-f67c0104.js";const Z=()=>{const o=R(),{data:i}=I({filter:{}}),n=p(T(u)),a=b.useMemo(()=>M(i==null?void 0:i.list),[i==null?void 0:i.list]),c=i?i==null?void 0:i.list.map(m=>m.id):void 0;return b.useEffect(()=>{c&&!(n!=null&&n.filter.modalityIDs)&&o(E({tableId:u,filter:{modalityIDs:c},merge:!0}))},[o,c,n]),c?r(B,{modalityIDs:c,modalitiesByGroupData:a,query:n,dispatch:o}):r(A,{})},ee=o=>{const{order:i}=o,n=w(),a=!i,c=y();return r(v,{onClick:()=>{if(i){const g=C(N,String(i.id));n(g)}},title:c.buttons.openOrder(),disabled:a,children:r(x,{IconComponent:F})})},re=o=>{const{refetch:i}=o,n=p(P(u));return r(k,{ActionsButton:O(S,{children:[r(z,{order:n}),r(ee,{order:n}),i&&r(_,{refetch:i})]})})},{StyledOrderTableRow:te}=J,oe=o=>{if(!o)return!1;const{filter:i}=o,{modalityIDs:n}=i;return!n||!n.length?!1:o},ie=30*1e3,se=()=>{const o=y(),i=p(T(u)),n=oe(i),{data:a,isFetching:c,refetch:m}=G(n||D.skipToken,{pollingInterval:ie}),g=b.useMemo(()=>{const l=({order:t,children:e})=>r(te,{$reportStatus:t.reportStatus,$urgent:t.urgent,children:e});return[{type:"custom",getColumnDef:t=>t.display({id:"stt",header:o.messages.stt(),cell:e=>r(q,{children:r(l,{order:e.row.original,children:e.row.index+1})}),maxSize:50})},{type:"record",name:"reportStatus",headerLabel:o.resources.order.status(),renderCell:t=>r(l,{order:t.row.original,children:r(V,{order:t.row.original})}),enableSort:!0,columnDefOptions:{maxSize:70}},{type:"custom",getColumnDef:t=>t.display({id:"patientName",header:o.resources.order.patient.fullname.long(),cell:e=>r(l,{order:e.row.original,children:r(j,{order:e.row.original})})})},{type:"custom",getColumnDef:t=>t.display({id:"patientPID",header:o.resources.order.patient.pid.long(),cell:e=>{var s;return r(l,{order:e.row.original,children:(s=e.row.original.patient)==null?void 0:s.pid})},maxSize:50})},{type:"record",name:"modalityType",headerLabel:o.resources.order.modalityType.short(),renderCell:t=>r(l,{order:t.row.original,children:t.getValue()}),columnDefOptions:{maxSize:70}},{type:"custom",getColumnDef:t=>t.display({id:"inpatient",header:o.resources.order.inpatient(),cell:e=>{var s,d;return r(l,{order:e.row.original,children:(s=e.row.original)!=null&&s.inpatient&&((d=e.row.original)!=null&&d.inpatient)?1:0})},maxSize:50})},{type:"custom",getColumnDef:t=>t.display({id:"numOfConsumables",header:o.resources.order.numOfConsumables.short(),cell:e=>r(l,{order:e.row.original,children:r(Q,{order:e.row.original})}),maxSize:50})},{type:"custom",getColumnDef:t=>t.display({id:"studyTime",header:o.resources.study.studyDatetime(),cell:e=>{var s,d;return r(l,{order:e.row.original,children:((s=e.row.original.study)==null?void 0:s.studyTime)&&((d=h(e.row.original.study.studyTime))==null?void 0:d.format(f.dateTimeNoSecond))})}})},{type:"custom",getColumnDef:t=>t.display({id:"requests",header:o.resources.order.requests(),cell:e=>r(l,{order:e.row.original,children:r(W,{order:e.row.original})})})},{type:"custom",getColumnDef:t=>t.display({id:"bodyPart",header:o.resources.study.bodyPartExamined.title(),cell:e=>{var s;return r(l,{order:e.row.original,children:(s=e.row.original.study)==null?void 0:s.bodyPartExamined})},maxSize:100})},{type:"record",name:"requestedTime",headerLabel:o.resources.order.requestedDate.long(),renderCell:t=>{var e;return r(l,{order:t.row.original,children:(e=h(t.getValue()))==null?void 0:e.format(f.dateTimeNoSecond)})},enableSort:!0},{type:"record",name:"accessionNumber",headerLabel:o.resources.order.accessionNumber.long(),renderCell:t=>r(l,{order:t.row.original,children:t.getValue()})},{type:"custom",getColumnDef:t=>t.display({id:"patientGender",header:o.resources.order.patient.gender(),cell:e=>{var s,d;return r(l,{order:e.row.original,children:((s=e.row.original.patient)==null?void 0:s.gender)&&o.messages.gender({gender:(d=e.row.original.patient)==null?void 0:d.gender})})},maxSize:100})},{type:"custom",getColumnDef:t=>t.display({id:"approver",header:o.resources.order.lockedBy.long(),cell:e=>{var s,d;return r(l,{order:e.row.original,children:e.row.original.requests?(d=(s=X(e.row.original))==null?void 0:s.finalApprover)==null?void 0:d.fullname:""})}})}]},[o.messages,o.resources.order,o.resources.study]);return r(U,{TableComponent:r($,{tableId:u,data:a==null?void 0:a.list,tableColumnsDescription:g,MyDataGridProps:{isLoading:c,selectRowOnRightClick:!1,hasRowClick:!0},paginationControls:{totalRecords:a==null?void 0:a.meta.totalRecords,pageSize:a==null?void 0:a.list.length},TanstackTableOptions:{enableRowSelection:!0,enableMultiRowSelection:!1},renderActionButtons:()=>r(re,{refetch:m})})})},de=()=>{const o=y();return r(Y,{title:o.pages.orderList.title(),children:r(H,{FilterComponent:r(Z,{}),TableComponent:r(se,{})})})},ce=()=>r("div",{children:"TestMobile"}),ue=()=>r(L,{to:K});export{ue as MobileMain,de as MobileOrderListPage,ce as TestMobile};
