import{h as S,r as D,a as n,s as P,j as v,bq as A,F as O}from"./vendor-1c7a9a47.js";import{j as x,b9 as l,dd as E,bb as N,bg as T,de as G,df as j,bi as m,bh as I,b8 as q,b7 as h,bj as k,dg as w,dh as B,bf as L,di as _,dj as F}from"./index-cdd5c634.js";import{R as H,f as M,a as Q,b as U,c as $}from"./RadiologyReportPanelShell-50afb226.js";import"./convertPdf-d312bc78.js";const z=()=>{var g;const o=x(),s=S(),[t,i]=D.useState(o),d=l(E(o))??void 0,{data:e}=N({id:t}),c=l(T(t??0)),y=(g=e==null?void 0:e.requests)==null?void 0:g.find(a=>a.id===c),b=l(G({orderID:o,requestID:c}))??d,R=e&&j(e)[0],[f,u]=D.useState((R==null?void 0:R.finalReportID)??b);return D.useEffect(()=>{t&&i(t)},[t]),{order:e,request:y,currentActiveReportID:d,reportID:f,onReportChanged:(a,p)=>{e!=null&&e.id&&(s(m({orderID:e.id,requestID:p})),s(I({orderID:e.id,activeReportID:a})),u(a))},onOrderChanged:a=>{i(a.id)},onRequestChanged:a=>{var p;if(e!=null&&e.id){const r=(p=e==null?void 0:e.requests)==null?void 0:p.find(C=>C.id===a);s(m({orderID:e.id,requestID:a})),r!=null&&r.finalReportID?u(r==null?void 0:r.finalReportID):u(void 0),s(I({orderID:e.id,activeReportID:null}))}}}},J=()=>{const o=K();return n(q,{page:h.REPORTING_READING,sxIconBar:{paddingTop:1},sidepanels:o})},K=()=>{const o=k(),s=z(),t=w(h.REPORTING_READING);return B({extensions:t,sidePanelData:s,translate:o})},V=o=>{const{ReportPanelComponent:s,DynamicSidePanel:t}=o;return v(W,{children:[s,t]})},W=P("div")`
  display: grid;
  height: 100%;
  max-height: 100%;
  max-width: 100vw;
  grid-template-columns: 1fr auto;
  overflow: hidden;
  background-color: ${o=>o.theme.palette.background.paper};
`,ae=()=>{const{orderID:o="NaN"}=A(),s=L(),t=parseInt(o),i=l(_(t)),{handleDeleteTab:d}=F(i);return isNaN(t)?n(O,{}):n(H,{orderID:t,callbacks:{onClose:d,onReportApproved(e,c){s(I({orderID:c.id,activeReportID:e}))}},ReportComponent:n(V,{ReportPanelComponent:n(M,{ReportHeader:n(Q,{ActionButtons:n(U,{})}),ReportContent:n($,{isQuickReportTab:!1})}),DynamicSidePanel:n(J,{},t)})},t)};export{ae as RadiologyReportPage};
