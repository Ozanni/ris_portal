import{a as t,F as M,j as E,S as z,aF as R,aG as u,ag as w,r as f,C as I,bd as L}from"./vendor-1c7a9a47.js";import{bj as y,ex as C,ed as g,c8 as b,g4 as T,dn as A,bc as k,e_ as F,cj as O,ca as D,b9 as x,bD as j,cR as B,dM as G,bm as q,gj as h,c2 as U,f6 as S,be as W,cb as Y,f7 as Q,ck as H,f9 as V,fa as $,fb as K}from"./index-cdd5c634.js";import{b as X,c as J,d as Z,e as ee,a as se}from"./modalityTypeName-04becb4d.js";const _=i=>{const{control:a,onKeyDown:s,record:o}=i,e=y();return t(M,{children:E(z,{spacing:1,alignItems:"start",width:"500px",children:[t(C,{name:"id",control:a,MyTextFieldProps:{label:e.resources.modalityTypeName.id(),placeholder:e.resources.modalityTypeName.id(),fullWidth:!0,required:!0,size:"small",onKeyDown:s,disabled:!!o}}),t(C,{name:"name",control:a,MyTextFieldProps:{label:e.resources.modalityTypeName.name(),placeholder:e.resources.modalityTypeName.name(),fullWidth:!0,required:!0,size:"small",onKeyDown:s}}),t(C,{name:"description",control:a,MyTextFieldProps:{label:e.resources.modalityTypeName.description(),placeholder:e.resources.modalityTypeName.description(),fullWidth:!0,size:"small",multiline:!0,rows:3,onKeyDown:s}})]})})},te=i=>{const{onSuccessCallback:a}=i,s=g(),o=y(),[e]=X(),c=b("success",o.messages.titles.createResource({resource:o.resources.modalityTypeName.title().toLowerCase()})),r=b("error",o.messages.titles.createResource({resource:o.resources.modalityTypeName.title().toLowerCase()})),d={mode:"onBlur",criteriaMode:"all",resolver:R(u.object({id:u.string().trim().min(1,o.messages.validation.genericRequired({resource:o.resources.modalityTypeName.id()})),name:u.string().trim().min(T,o.messages.validation.genericMinLength({resource:o.resources.modalityTypeName.name(),length:T})),description:u.string().optional().nullable()})),defaultValues:{name:"",id:"",description:null}};return t(A,{registerFormFunctions:l=>s("submitCreateForm",()=>l.submit&&l.submit()),onSubmit:async l=>{try{const n={id:l.id??"",name:l.name??"",description:l.description??null};"error"in await e(n)?r():(c(),a&&a())}catch{r()}},submitOnEnter:!0,formOptions:d,renderInputs:l=>t(_,{...l})})},oe=()=>{const{isOpen:i,open:a,close:s}=k(!1);return g()("openCreateModal",a),t(w,{open:i,children:t(v,{closeModal:s})})},v=i=>{const{closeModal:a}=i,s=y(),o=F();return t(O,{confirmLabel:s.buttons.create(),handleClose:a,BodyComponent:t(te,{onSuccessCallback:a}),handleConfirm:()=>o.submitCreateForm(),title:s.messages.titles.createResource({resource:s.resources.modalityTypeName.title().toLowerCase()})})};v.displayName="ModalityTypeNameCreateModal";const ae=i=>{const{onSuccessCallback:a,record:s}=i,o=g(),e=y(),[c]=J(),r=b("success",e.messages.titles.editResource({resource:e.resources.modalityTypeName.title().toLowerCase()})),d=b("error",e.messages.titles.editResource({resource:e.resources.modalityTypeName.title().toLowerCase()})),p={mode:"onBlur",criteriaMode:"all",resolver:R(u.object({id:u.string().trim().min(1,e.messages.validation.genericRequired({resource:e.resources.modalityTypeName.id()})),name:u.string().trim().min(T,e.messages.validation.genericMinLength({resource:e.resources.modalityTypeName.name(),length:T})),description:u.string().optional().nullable()})),defaultValues:{id:s.id,name:s.name,description:s.description}};return t(A,{registerFormFunctions:n=>o("submitEditForm",()=>n.submit&&n.submit()),onSubmit:async n=>{try{const m={id:n.id??"",name:n.name??"",description:n.description??""};"error"in await c(m)?d():(r(),a&&a())}catch{d()}},submitOnEnter:!0,formOptions:p,renderInputs:n=>t(_,{record:s,...n})})},re=()=>{const{isOpen:i,open:a,close:s}=k(!1),o=x(j(B.MODALITY_TYPE_NAME)),{data:e}=Z(o?{id:o==null?void 0:o.id}:L.skipToken),[c]=ee(),r=y(),d=G(),p=g();p("openEditModal",a);const l=b("success",r.messages.titles.deleteResource({resource:r.resources.modalityTypeName.title().toLowerCase()})),n=b("error",r.messages.titles.deleteResource({resource:r.resources.modalityTypeName.title().toLowerCase()})),m=f.useCallback(()=>{e&&d({message:`${r.messages.notification.deleteModalityTypeName({name:`${e==null?void 0:e.name}`})}`,options:{variant:"warning",onConfirm:async()=>{"error"in await c({id:e.id})?n():(l(),s())}}})},[s,c,e,n,d,l,r.messages.notification]);return p("submitDelete",()=>m()),e?t(w,{disableEnforceFocus:!0,open:i,children:t(P,{record:e,closeModal:s})}):t(M,{})},P=f.forwardRef((i,a)=>{const{closeModal:s,record:o}=i,e=y(),c=F();return t(M,{children:t(O,{ref:a,confirmLabel:e.buttons.update(),handleConfirm:()=>c.submitEditForm(),handleClose:s,BodyComponent:o?t(ae,{record:o,onSuccessCallback:s}):t(D,{children:t(I,{})}),title:e.messages.titles.editResource({resource:e.resources.modalityTypeName.title().toLowerCase()})})})});P.displayName="ModalityTypeNameEditModal";const ie=i=>{const{FilterComponent:a,permission:s}=i,o=y(),e=F(),c=x(q(h)),{data:r,isFetching:d,refetch:p}=se(c||L.skipToken),{open:l}=U(),n=f.useMemo(()=>[{type:"custom",getColumnDef:m=>m.display({id:"stt",header:o.messages.stt(),cell:N=>t(D,{children:N.row.index+1}),minSize:S,maxSize:S})},{type:"record",name:"id",headerLabel:"ID",columnDefOptions:{size:150},enableSort:!0},{type:"record",name:"name",headerLabel:o.resources.modalityTypeName.name(),columnDefOptions:{size:700}},{type:"record",name:"description",headerLabel:o.resources.modalityTypeName.description(),columnDefOptions:{size:760}}],[o.messages,o.resources.modalityTypeName]);return t(W,{children:t(Y,{tableId:h,data:r==null?void 0:r.list,FilterComponent:a,tableColumnsDescription:n,MyDataGridProps:{isLoading:d,onRowRightClick:m=>{l(m)},onRowDoubleClick(){s!=null&&s.isSysadmin&&e.openEditModal()}},paginationControls:{totalRecords:r==null?void 0:r.meta.totalRecords,pageSize:r==null?void 0:r.list.length},TanstackTableOptions:{enableRowSelection:!0,enableMultiRowSelection:!1},renderActionButtons:()=>t(Q,{disabled:!(s!=null&&s.isSysadmin),tableId:h,refetch:p})})})},de=()=>{const i=y(),a=H();return E(V,{children:[t($,{title:i.resources.modalityTypeName.title(),ActionButtons:t(M,{}),TableComponent:t(ie,{permission:a,FilterComponent:void 0})}),t(oe,{}),t(re,{}),t(K,{disabled:!(a!=null&&a.isSysadmin)})]})};export{de as AdminModalityTypeName};
