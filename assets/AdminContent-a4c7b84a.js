import{a as e,j as b,x as O,s as F,aF as w,aG as l,S as k,ao as y,bd as z,r as R,F as G}from"./vendor-1c7a9a47.js";import{cL as P,e8 as _,ei as Q,dm as N,bj as T,bf as j,ey as B,fg as U,e6 as H,fK as K,b9 as v,bm as x,fL as f,eT as D,f3 as V,f4 as W,f5 as Y,M as $,bv as X,cH as A,dM as J,eK as Z,e_ as E,c2 as q,ca as C,f6 as I,cb as ee,f7 as te,f9 as ne,fa as oe,fM as se,fN as re,fb as ae}from"./index-cdd5c634.js";import{d as le,a as ie}from"./CheckBoxOutlineBlank-b920c4bc.js";const ce=r=>{const{control:u,name:a}=r,d=e(le,{fontSize:"small"}),o=e(ie,{fontSize:"small"}),{data:m}=P({filter:{}}),t=m==null?void 0:m.list;return e(_,{name:a,control:u,label:r.label,placeholder:r.placeholder,MyAutoCompleteProps:{options:(t==null?void 0:t.map(i=>i.name))||[],fullWidth:!0,disablePortal:!0,isOptionEqualToValue:(i,p)=>i===p,getOptionLabel:i=>i||"",renderOption:(i,p,{selected:n})=>b("li",{...i,children:[e(O,{icon:d,checkedIcon:o,style:{marginRight:8},checked:n}),p]})}})},de={name:"",modalityTypes:[],groupID:void 0,procedureID:void 0,userID:void 0},ue=()=>{const r=T(),u=j(),{data:a}=B({filter:{}}),{data:d}=U({filter:{}}),{data:o}=H({filter:{}}),[m]=K(),t=v(x(f)),i={mode:"onChange",resolver:w(l.object({name:l.string().trim().optional().transform(D),modalityTypes:l.array(l.string()).transform(n=>n&&n.length?n:void 0).optional(),groupID:l.union([l.number(),l.string()]).optional().transform(D),procedureID:l.union([l.number(),l.string()]).optional().transform(D),userID:l.union([l.number(),l.string()]).optional().transform(D)})),defaultValues:{name:(t==null?void 0:t.filter.name)??"",modalityTypes:(t==null?void 0:t.filter.modalityTypes)??void 0,groupID:(t==null?void 0:t.filter.groupID)??void 0,procedureID:(t==null?void 0:t.filter.procedureID)??void 0,userID:(t==null?void 0:t.filter.userID)??void 0}};return e(V,{formOptions:i,onSubmit:n=>{u(X({tableId:f,filter:n})),m({...t,filter:n})},submitOnEnter:!0,autoSubmit:!0,renderInputs:n=>{var c,h,g;return e(W,{handleSubmit:n.submit,renderPrimaryField:({open:s,isOpen:L})=>e(Y,{name:"name",control:n.control,handleSubmit:n.submit,handleExpand:s,isExpanded:L,isFormDirty:n.formState.isDirty,resetFormOnDirty:!1,handleReset:()=>n.reset(de),MyTextFieldProps:{placeholder:r.resources.content.name.short(),fullWidth:!0,onKeyDown:n.onKeyDown}}),ExtraFieldsComponent:b(k,{spacing:1,children:[e(ce,{label:r.resources.modality.modalityType.short(),control:n.control,placeholder:r.resources.modality.modalityType.short(),name:"modalityTypes"}),b(S,{name:"groupID",control:n.control,MySelectProps:{label:r.resources.content.groupIDs()},children:[e(y,{value:"",children:" "},"null"),a&&((c=a==null?void 0:a.list)==null?void 0:c.map(s=>e(y,{value:s.id||"",children:e(M,{title:s.name??"",children:s.name})},s.id)))]}),b(S,{name:"procedureID",control:n.control,MySelectProps:{label:r.resources.content.procedureIDs(),MenuProps:{PaperProps:{style:{maxHeight:300,overflowY:"auto",maxWidth:300}}}},children:[e(y,{value:"",children:" "},"null"),d&&((h=d==null?void 0:d.list)==null?void 0:h.map(s=>e(y,{value:s.id||"",children:e(M,{title:s.name??"",children:s.name})},s.id)))]}),b(S,{name:"userID",control:n.control,MySelectProps:{label:r.resources.content.user(),MenuProps:{PaperProps:{style:{maxHeight:300,overflowY:"auto"}}}},children:[e(y,{value:"",children:" "},"null"),o&&((g=o==null?void 0:o.list)==null?void 0:g.map(s=>e(y,{value:s.id||"",children:e(M,{title:s.fullname??"",children:s.fullname})},s.id)))]})]},$())})}})},M=F("div")`
  ${Q.ellipsisEffect}
`,S=F(N)`
  .MuiPopover-paper {
    max-width: 20vw;
    max-height: 300px;
  }
`,me=r=>{const{FilterComponent:u}=r,a=T();J();const d=v(x(f)),{data:o,isFetching:m,refetch:t}=Z(d||z.skipToken),i=E(),{open:p}=q(),n=R.useMemo(()=>[{type:"custom",getColumnDef:c=>c.display({id:"stt",header:a.messages.stt(),cell:h=>e(C,{children:h.row.index+1}),minSize:I,maxSize:I})},{type:"record",name:"id",headerLabel:"ID",renderCell:c=>e(C,{children:c.getValue()}),columnDefOptions:{maxSize:50},enableSort:!0},{type:"record",name:"name",headerLabel:a.resources.content.name.short(),columnDefOptions:{size:600}},{type:"custom",getColumnDef:c=>c.display({id:"user",header:()=>a.resources.content.user(),cell:h=>{var g;return(g=h.row.original.user)==null?void 0:g.fullname},size:150})},{type:"record",name:"impression",headerLabel:a.resources.content.impression(),columnDefOptions:{size:850}}],[a.messages,a.resources.content]);return e(ee,{tableId:f,data:o==null?void 0:o.list,FilterComponent:u,tableColumnsDescription:n,MyDataGridProps:{isLoading:m,onRowRightClick:c=>{p(c)},onRowDoubleClick(){i.openEditModal()}},paginationControls:{totalRecords:o==null?void 0:o.meta.totalRecords,pageSize:o==null?void 0:o.list.length},TanstackTableOptions:{enableRowSelection:!0,enableMultiRowSelection:!1},renderActionButtons:()=>e(te,{tableId:f,refetch:t})})};F(A)`
  border: 0;
  &:hover {
    border: 0;
  }
`;const be=()=>{const r=T(),u=E();return b(ne,{children:[e(oe,{title:r.resources.content.title(),TableComponent:e(me,{FilterComponent:e(ue,{})}),ActionButtons:e(G,{children:e(A,{variant:"contained",onClick:()=>u.openCreateModal(),children:r.buttons.create()})})}),e(se,{}),e(re,{tableID:f}),e(ae,{})]})};export{be as AdminContent};
