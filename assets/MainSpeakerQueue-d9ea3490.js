import{s as d,a as e,j as g,S as m,T as c,r as p,a9 as a,bq as f}from"./vendor-1c7a9a47.js";import{h3 as C,ca as y,ce as w,h6 as b,cb as x,gU as k,dl as R,gy as T,h2 as D}from"./index-cdd5c634.js";import{l as E}from"./logo-hih-9d8b84fe.js";import{a as N}from"./sound-37325c7e.js";const v=()=>e(M,{children:g(m,{spacing:0,children:[g(m,{direction:"row",spacing:2,alignItems:"center",justifyContent:"center",children:[e(z,{src:E,alt:"logo"}),e(c,{variant:"h3",textTransform:"uppercase",fontWeight:600,color:"primary",children:C})]}),e(c,{variant:"h3",textTransform:"uppercase",fontWeight:600,color:"red",align:"center",children:"Tự động gọi loa"})]})}),M=d("div")`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
`,z=d("img")`
  height: ${r=>r.theme.typography.h1.fontSize};
  top: 0;
  left: 0;
`,G=r=>{const[n]=N(),[i,o]=p.useState([]),[l,t]=p.useState();p.useEffect(()=>{if(i.length<=0){const s=setInterval(()=>{n({filter:{speakerId:r.speakerId},pagination:{page:1,perPage:5}}).unwrap().then(h=>{h&&h.list.length>0&&(o(h.list),t(h.list[0].id),clearInterval(s))})},1e3);return()=>{clearInterval(s)}}},[i.length,r.speakerId,n]);const A=i.find(s=>s.id===l);return{onPlayerEnded:s=>{i&&i[i.length-1].id===s?o([]):t(u=>u&&u+1)},currentSound:A,listSoundData:i}},P="data:image/gif;base64,R0lGODlhEAAQAJECAACKvgCu7////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVGNEJFM0Q5MzFCRjExRTVCQTZERDdBMkYzNkVFNTU4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVGNEJFM0RBMzFCRjExRTVCQTZERDdBMkYzNkVFNTU4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUY0QkUzRDczMUJGMTFFNUJBNkREN0EyRjM2RUU1NTgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUY0QkUzRDgzMUJGMTFFNUJBNkREN0EyRjM2RUU1NTgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQJCgACACwAAAAAEAAQAAACKZSPqcvtHsI7EdV1TU57W0mBSkWKnFR+GsqqQgqD8dvS9iwAQL7r/F8AACH5BAkKAAIALAAAAAAQABAAAAIrlI+pyxGsHExynmowfZd3oWngE5KcVI6ZqaIn66otzM52FeccAAi83/v9CgAh+QQJCgACACwAAAAAEAAQAAACKpSPqcsa0dKLaFIzbctwcaFJ0Ad22IieVWqFX8vG6puWNm0AgKDze98rAAAh+QQFCgACACwAAAAAEAAQAAACKZSPqcsa0dKLaFJjb5bw7NphoShs34RCp8qWowuncNzK9G0BgKDDfV8AADs=",L=r=>{const{currentSoundID:n,listSound:i}=r,o=p.useMemo(()=>{const l=t=>e(c,{variant:"h5",textTransform:"uppercase",fontWeight:500,children:t.children});return[{type:"record",name:"id",headerLabel:"ID",renderHeader:t=>e(l,{children:t}),renderCell:t=>e(y,{sx:{p:.5},children:e(c,{variant:"h5",textTransform:"uppercase",children:t.row.index+1})}),columnDefOptions:{maxSize:30}},{type:"record",name:"ticketNumber",headerLabel:"STT",renderHeader:t=>e(l,{children:t}),renderCell:t=>e(y,{sx:{p:.5},children:e(c,{variant:"h5",textTransform:"uppercase",children:t.getValue()})}),columnDefOptions:{maxSize:30}},{type:"record",name:"patientName",headerLabel:"Tên bệnh nhân",renderHeader:t=>e(l,{children:t}),renderCell:t=>e(y,{sx:{p:.5},children:e(c,{variant:"h5",textTransform:"uppercase",children:t.getValue()})}),columnDefOptions:{maxSize:30}},{type:"record",name:"modalityRoom",headerLabel:"Tên phòng",renderHeader:t=>e(l,{children:t}),renderCell:t=>e(y,{children:t.getValue()}),columnDefOptions:{maxSize:150}},{type:"custom",getColumnDef:t=>t.display({header:"STATUS",cell:A=>e(y,{children:e(w,{children:n&&A.row.original.id===n?e("img",{width:"24px",height:"24px",src:P,alt:"logo-playing"}):e(b,{})})}),maxSize:20})}]},[n]);return e(x,{tableId:k.QMS_SOUND,data:i,tableColumnsDescription:o,showPagination:!1,showPaginationInfo:!1,TanstackTableOptions:{enableRowSelection:!1,enableMultiRowSelection:!1},sx:{height:"100%"}})},Q="/assets/Speaker_Icon-578fd7fc.png",U=r=>{const{sound:n,onPlayerEnded:i,repeat:o=1}=r,l=p.useRef(null),[t,A]=p.useState(0),S=s=>{A(h=>{var I;const u=h+1;return u===o?(n&&i(n.id),0):((I=l.current)==null||I.play(),u)})};return e(V,{padding:3,children:g(a,{container:!0,direction:"column",width:"100%",height:"100%",children:[g(a,{item:!0,xs:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[e(c,{fontSize:24,fontWeight:500,children:n==null?void 0:n.patientName}),e(c,{children:n==null?void 0:n.modalityRoom})]}),e(a,{item:!0,xs:8,display:"flex",alignItems:"center",justifyContent:"center",children:e(m,{width:"250px",height:"250px",children:e(j,{src:Q,alt:"logo"})})}),e(a,{item:!0,xs:2,display:"flex",alignItems:"center",justifyContent:"center",children:n&&e(H,{autoPlay:!0,ref:l,controls:!0,src:`data:audio/wav;base64,${n==null?void 0:n.audio}`,onEnded:S,children:e("track",{kind:"captions"})},n.id)})]})})},V=d(m)`
  background-color: ${r=>r.theme.palette.background.default};
  width: 100%;
  height: 100%;
`,H=d("audio")`
  width: 100%;
`,j=d("img")(()=>({})),F=()=>{const{speaker:r}=f();return r?e(Y,{speakerId:parseInt(r)}):e(R,{})},Y=r=>{const{onPlayerEnded:n,currentSound:i,listSoundData:o}=G({speakerId:r.speakerId});return g(a,{container:!0,width:"100%",height:"100%",children:[e(a,{item:!0,xs:4,children:e(W,{children:e(U,{onPlayerEnded:n,sound:i})})}),e(a,{item:!0,xs:8,children:e(J,{children:e(L,{listSound:o,currentSoundID:i==null?void 0:i.id})})})]})},W=d(m)`
  width: 100%;
  height: 100%;
`,J=d(m)`
  width: 100%;
  height: 100%;
`,B=r=>e(Z,{Head:e(D,{customTitle:"Gọi số thứ tự"}),children:r.children}),Z=d(T)`
  display: flex;
  flex-direction: column;
  width: 100vw;
  max-width: 100vw;
  height: 100vh;
  max-height: 100vh;
  overflow-y: hidden;
`,O=r=>g(a,{container:!0,spacing:2,direction:"column",width:"100%",height:"100%",wrap:"nowrap",children:[e(a,{item:!0,xs:2,children:r.HeaderPlayer}),e(a,{item:!0,xs:10,children:r.PlayerComponent})]}),$=()=>e(B,{children:e(O,{HeaderPlayer:e(v,{}),PlayerComponent:e(F,{})})});export{$ as MainSpeakerQueue};
